import{c as P,o as s,w as a,d as t,j as $,ay as F,p as i,t as u,g as _,aX as I,az as M,aP as N,h as E,ax as O,P as U,r as c,Q as V,l as g,aN as j,F as y,n as x,m as b}from"./index-8XkL9mke.js";import{V as h,a as G}from"./VChip-Ci4F4dQL.js";import{V as R}from"./VDivider-DhumEhaV.js";import{p as z}from"./product-BnJYUqlY.js";import{b as A}from"./route-block-B_A1xBdJ.js";import{V as Q,a as k}from"./VRow-BxM1Nn8a.js";import{V as X}from"./VMenu-1u2F--IG.js";import{V as q,a as H}from"./VList-BZs7Wlsb.js";import{V as J}from"./VPagination-BwrHQKQj.js";import{V as K}from"./VContainer-3X4AzbHd.js";import"./ssrBoot-H2_3cXLE.js";const W={__name:"ProductCard",props:["_id","image","name","category","price","description"],setup(o){return(w,m)=>(s(),P(O,null,{default:a(()=>[t($,{cover:"",height:"300",src:o.image},null,8,["src"]),t(F,{class:"d-flex align-center"},{default:a(()=>[i(u(o.name)+" ",1),t(_),t(h,{color:"orange"},{default:a(()=>[i(u(o.category),1)]),_:1})]),_:1}),t(R,{class:"mb-5"}),t(I,null,{default:a(()=>[i(u(o.category)+" / "+u(o.price),1)]),_:1}),t(M,null,{default:a(()=>[i(u(o.description),1)]),_:1}),t(N,{class:"mb-3"},{default:a(()=>[t(_),t(E,{color:"orange",text:"詳細資訊",to:"/product/"+o._id,variant:"flat"},null,8,["to"])]),_:1})]),_:1}))}},C=10,Y={__name:"product",setup(o){const w=U(),m=c([]),S=V(()=>m.value.filter(l=>{const r=l.name.toLowerCase().includes(f.value.toLowerCase()),e=d.value?l.category===d.value:!0;return r&&e}).sort((l,r)=>{const e=v[p.value];return e.key==="createdAt"||e.key==="updatedAt"?e.direction*(new Date(l[e.key])-new Date(r[e.key])):e.direction*(l[e.key]>r[e.key]?1:-1)})),n=c(1),L=V(()=>Math.ceil(S.value.length/C)),T=V(()=>S.value.slice((n.value-1)*C,n.value*C)),f=c(""),d=c(""),B=["電子產品","服裝","家居用品","書籍","玩具","食品","其他"],p=c(0),v=[{text:"名稱",key:"name",direction:1},{text:"價格：低到高",key:"price",direction:1},{text:"價格：高到低",key:"price",direction:-1},{text:"最新商品",key:"createdAt",direction:-1},{text:"最舊商品",key:"createdAt",direction:1}];return(async()=>{try{const{data:l}=await z.get();m.value=l.products}catch(l){console.error("Error fetching products:",l),w({text:"無法載入商品資料",snackbarProps:{color:"red"}})}})(),(l,r)=>(s(),P(K,null,{default:a(()=>[t(Q,{justify:"center"},{default:a(()=>[t(k,{cols:"12"},{default:a(()=>[t(j,{modelValue:f.value,"onUpdate:modelValue":[r[0]||(r[0]=e=>f.value=e),r[1]||(r[1]=e=>n.value=1)],flat:"","hide-details":"",placeholder:"搜尋商品","prepend-inner-icon":"mdi-magnify",variant:"solo"},null,8,["modelValue"]),t(G,{modelValue:d.value,"onUpdate:modelValue":[r[2]||(r[2]=e=>d.value=e),r[3]||(r[3]=e=>n.value=1)],mandatory:""},{default:a(()=>[t(h,{filter:"",text:"全部",value:"",variant:"outlined"}),(s(),g(y,null,x(B,e=>t(h,{key:e,filter:"",text:e,value:e,variant:"outlined"},null,8,["text","value"])),64)),t(_),t(X,null,{activator:a(({props:e})=>[t(E,b(e,{"append-icon":"mdi-chevron-down",ripple:!1,variant:"text"}),{default:a(()=>[i(u(v[p.value].text),1)]),_:2},1040)]),default:a(()=>[t(q,null,{default:a(()=>[(s(),g(y,null,x(v,(e,D)=>t(H,{key:e.text,onClick:ee=>{p.value=D,n.value=1}},{default:a(()=>[i(u(e.text),1)]),_:2},1032,["onClick"])),64))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),(s(!0),g(y,null,x(T.value,e=>(s(),P(k,{key:e._id,cols:"12",lg:"4",md:"6"},{default:a(()=>[t(W,b({ref_for:!0},e),null,16)]),_:2},1024))),128)),t(k,{cols:"12"},{default:a(()=>[t(J,{modelValue:n.value,"onUpdate:modelValue":r[4]||(r[4]=e=>n.value=e),circle:"",length:L.value,"total-visible":5},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1}))}};typeof A=="function"&&A(Y);export{Y as default};
