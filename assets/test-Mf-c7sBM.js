import{D as S,V as U,a as F}from"./DiaryCard-Z7gV4kDE.js";import{d as $}from"./diary-BPGOqrfs.js";import{u as j,r as d,Q as M,X as P,c as i,o,w as t,d as s,e as u,aM as Q,l as V,F as g,n as x,aS as R,R as y,f as W,p as _,k as q,h,aP as A,ax as E,ay as G,t as p,az as O,j as X}from"./index-Byq_qIU-.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as n,a as c}from"./VRow-YsLEDygf.js";import{a as J,V as k}from"./VChip-BWGeb_Ua.js";import{V as K}from"./VDivider-Bg9SXvB8.js";import{V as Y}from"./VContainer-D0C_tlqJ.js";import"./ssrBoot-yz0QkJx1.js";const Z={class:"text-h5"},ee={class:"text-body-1"},te={class:"text-body-1"},ae={class:"text-caption text-grey"},le={__name:"test",setup(se){const w=j(),C=d([]),v=d(!0),m=d(""),f=d(""),r=d({open:!1,diary:null}),L=["快樂","難過","生氣","平靜"],b=M(()=>{let a=C.value;if(f.value&&(a=a.filter(e=>e.category===f.value)),m.value){const e=m.value.toLowerCase();a=a.filter(l=>l.description.toLowerCase().includes(e)||l.category.toLowerCase().includes(e))}return a}),T=async()=>{try{v.value=!0;const{data:a}=await $.get();C.value=a.diarys||[]}catch(a){console.error("載入日記失敗:",a)}finally{v.value=!1}},z=a=>{r.value.diary=a,r.value.open=!0},B=()=>{r.value.open=!1,r.value.diary=null},I=a=>a?new Date(a).toLocaleDateString("zh-TW",{year:"numeric",month:"long",day:"numeric"}):"",N=a=>a?new Date(a).toLocaleString("zh-TW"):"";return P(()=>{T()}),(a,e)=>(o(),i(Y,null,{default:t(()=>[s(n,{class:"mb-6"},{default:t(()=>[s(c,{class:"text-center",cols:"12"},{default:t(()=>e[4]||(e[4]=[u("h1",{class:"text-h2 font-weight-bold text-success mb-2"},"回憶牆",-1),u("p",{class:"text-body-1 text-medium-emphasis"},"記錄生活中的美好時刻，分享您的快樂回憶",-1)])),_:1,__:[4]})]),_:1}),s(n,{class:"mb-6"},{default:t(()=>[s(c,{cols:"12",md:"6"},{default:t(()=>[s(Q,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=l=>m.value=l),clearable:"","hide-details":"",label:"搜尋回憶","prepend-icon":"mdi-magnify"},null,8,["modelValue"])]),_:1}),s(J,{modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=l=>f.value=l),clearable:"",cols:"12","hide-details":"",md:"6","prepend-icon":"mdi-filter"},{default:t(()=>[s(k,{filter:"",text:"全部",value:""}),(o(),V(g,null,x(L,l=>s(k,{key:l,filter:"",text:l,value:l},null,8,["text","value"])),64))]),_:1},8,["modelValue"])]),_:1}),v.value?(o(),i(n,{key:0},{default:t(()=>[s(c,{class:"text-center",cols:"12"},{default:t(()=>[s(R,{color:"success",indeterminate:"",size:"64"}),e[5]||(e[5]=u("p",{class:"mt-4 text-body-1"},"載入回憶中...",-1))]),_:1,__:[5]})]),_:1})):b.value.length>0?(o(),i(n,{key:1},{default:t(()=>[(o(!0),V(g,null,x(b.value,l=>(o(),i(c,{key:l._id,cols:"12",lg:"3",md:"4",sm:"6"},{default:t(()=>[s(S,{diary:l,onClick:D=>z(l)},null,8,["diary","onClick"])]),_:2},1024))),128))]),_:1})):(o(),i(n,{key:2},{default:t(()=>[s(c,{class:"text-center",cols:"12"},{default:t(()=>[s(W,{class:"mb-4",color:"grey-lighten-1",size:"64"},{default:t(()=>e[6]||(e[6]=[_("mdi-book-heart-outline")])),_:1,__:[6]}),e[8]||(e[8]=u("h3",{class:"text-h5 text-grey-darken-1 mb-2"},"還沒有回憶",-1)),e[9]||(e[9]=u("p",{class:"text-body-1 text-grey"},"開始記錄您的美好時刻吧！",-1)),q(w).isLogin?(o(),i(h,{key:0,class:"mt-4",color:"success",onClick:e[2]||(e[2]=l=>a.$router.push("/user/diary"))},{default:t(()=>e[7]||(e[7]=[_(" 新增回憶 ")])),_:1,__:[7]})):y("",!0)]),_:1,__:[8,9]})]),_:1})),s(A,{modelValue:r.value.open,"onUpdate:modelValue":e[3]||(e[3]=l=>r.value.open=l),"max-width":"800"},{default:t(()=>[r.value.diary?(o(),i(E,{key:0},{default:t(()=>[s(G,{class:"d-flex align-center justify-space-between"},{default:t(()=>[u("div",null,[u("span",Z,p(r.value.diary.category),1),r.value.diary.date?(o(),i(k,{key:0,class:"ml-2",color:"success",size:"small"},{default:t(()=>[_(p(I(r.value.diary.date)),1)]),_:1})):y("",!0)]),s(h,{icon:"mdi-close",variant:"text",onClick:B})]),_:1}),s(O,null,{default:t(()=>[r.value.diary.image&&r.value.diary.image.length>0?(o(),i(U,{key:0,class:"mb-4",height:"400","hide-delimiter-background":"","show-arrows":"hover"},{default:t(()=>[(o(!0),V(g,null,x(r.value.diary.image,(l,D)=>(o(),i(F,{key:D},{default:t(()=>[s(X,{class:"rounded",cover:"",height:"100%",src:l},null,8,["src"])]),_:2},1024))),128))]),_:1})):y("",!0),u("div",ee,[e[10]||(e[10]=u("h4",{class:"text-h6 mb-2"},"今日三件好事：",-1)),u("p",te,p(r.value.diary.description),1)]),s(K,{class:"my-4"}),u("div",ae," 建立於："+p(N(r.value.diary.createdAt)),1)]),_:1})]),_:1})):y("",!0)]),_:1},8,["modelValue"])]),_:1}))}},ye=H(le,[["__scopeId","data-v-7e404cb5"]]);export{ye as default};
