import{P as S,a as C,u as $,r as q,S as B,c as F,o as N,w as s,d as a,ax as z,az as I,e as n,f,p as i,aO as M,k as o,aN as b,h as v}from"./index-8XkL9mke.js";import{u as P,c as T,b as g,e as V}from"./index.esm-Bhj8Wjwq.js";import{b as x}from"./route-block-B_A1xBdJ.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as R,a as j}from"./VRow-BxM1Nn8a.js";import{V as O}from"./VForm-GbORafpw.js";import{V as A}from"./VContainer-3X4AzbHd.js";const D={class:"mb-8"},E={class:"text-center"},y={__name:"login",setup(G){const p=S(),w=C(),_=$(),u=q(!1),d=P({validationSchema:T({account:g().required("帳號或電子郵件是必填的"),password:g().required("密碼是必填的").min(4,"密碼至少需要 4 個字元").max(20,"密碼最多只能有 20 個字元")})}),m=V("account"),c=V("password"),k=d.handleSubmit(async l=>{var e,r;try{const{data:t}=await B.login({account:l.account,password:l.password});_.login(t.user),p({text:"登入成功！",snackbarProps:{color:"green"}}),w.push("/")}catch(t){console.error(t),p({text:((r=(e=t==null?void 0:t.response)==null?void 0:e.data)==null?void 0:r.message)||"登入失敗，請稍後再試！",snackbarProps:{color:"red"}})}});return(l,e)=>(N(),F(A,{class:"login-container",fluid:""},{default:s(()=>[a(R,{align:"center",class:"mt-10",justify:"center"},{default:s(()=>[a(j,{cols:"12",lg:"4",md:"6",sm:"8"},{default:s(()=>[a(z,{class:"login-card",elevation:"12"},{default:s(()=>[a(I,{class:"text-center pa-8"},{default:s(()=>[n("div",D,[a(f,{class:"mb-2",color:"primary",size:"64"},{default:s(()=>e[4]||(e[4]=[i(" mdi-account-circle ")])),_:1,__:[4]}),e[5]||(e[5]=n("h1",{class:"text-h4 font-weight-bold text-primary mb-2"}," 歡迎回來 ",-1))]),a(O,{disabled:o(d).isSubmitting.value,onSubmit:M(o(k),["prevent"])},{default:s(()=>[a(b,{modelValue:o(m).value.value,"onUpdate:modelValue":e[0]||(e[0]=r=>o(m).value.value=r),class:"mb-4",color:"primary","error-messages":o(m).errorMessage.value,label:"帳號或信箱","prepend-inner-icon":"mdi-account",required:"",variant:"outlined"},null,8,["modelValue","error-messages"]),a(b,{modelValue:o(c).value.value,"onUpdate:modelValue":e[1]||(e[1]=r=>o(c).value.value=r),"append-inner-icon":"passwordVisible ? 'mdi-eye' : 'mdi-eye-off'",counter:"",color:"primary","error-messages":o(c).errorMessage.value,label:"密碼",maxlength:"20",class:"mb-6",minlength:"4","prepend-inner-icon":"mdi-lock",required:"",type:u.value?"text":"password",variant:"outlined","onClick:appendInner":e[2]||(e[2]=r=>u.value=!u.value)},null,8,["modelValue","error-messages","type"]),a(v,{block:"",class:"mb-4",color:"primary",elevation:"2",loading:o(d).isSubmitting.value,size:"large",type:"submit"},{default:s(()=>[a(f,{left:""},{default:s(()=>e[6]||(e[6]=[i("mdi-login")])),_:1,__:[6]}),e[7]||(e[7]=i(" 登入 "))]),_:1,__:[7]},8,["loading"])]),_:1},8,["disabled","onSubmit"]),n("div",E,[e[9]||(e[9]=n("span",{class:"text-body-2 text-medium-emphasis"}," 還沒有帳戶？ ",-1)),a(v,{class:"ml-2",color:"primary",variant:"text",onClick:e[3]||(e[3]=r=>l.$router.push("/register"))},{default:s(()=>e[8]||(e[8]=[i(" 立即註冊 ")])),_:1,__:[8]})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};typeof x=="function"&&x(y);const Y=U(y,[["__scopeId","data-v-39ff683b"]]);export{Y as default};
