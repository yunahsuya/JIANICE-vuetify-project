import{P as b,a as k,aY as x,u as h,r as p,l as w,o as P,d as r,w as o,e as s,t as l,j as S,h as m,p as f,aZ as C,F as B,S as N}from"./index-Byq_qIU-.js";import{p as E}from"./product-nPzA2FN9.js";import{b as v}from"./route-block-B_A1xBdJ.js";import{V as I,a as n}from"./VRow-YsLEDygf.js";import{V as g}from"./VDivider-Bg9SXvB8.js";import{V as R}from"./VNumberInput-BaJQLWB1.js";import{V as T}from"./VContainer-D0C_tlqJ.js";const j={class:"text-center"},q={style:{"white-space":"pre"}},D={__name:"[id]",setup(F){const u=b(),i=k(),d=x(),y=h(),t=p({name:"",price:0,description:"",category:"",sell:!0,image:""});(async()=>{try{const{data:e}=await E.getId(d.params.id);t.value.name=e.product.name,t.value.price=e.product.price,t.value.description=e.product.description,t.value.category=e.product.category,t.value.sell=e.product.sell,t.value.image=e.product.image,document.title=`${e.product.name} | 購物網站`}catch(e){console.error("Error fetching products:",e),u({text:"無法載入商品資料",snackbarProps:{color:"red"}}),i.push("/")}})();const c=p(1),V=async()=>{try{const{data:e}=await N.cart({product:d.params.id,quantity:c.value});y.cartTotal=e.result,u({text:"已加入購物車",snackbarProps:{color:"green"}})}catch(e){console.error("Error fetching products:",e),u({text:"無法加入購物車",snackbarProps:{color:"red"}}),i.push("/")}};return(e,a)=>(P(),w(B,null,[r(T,null,{default:o(()=>[r(I,null,{default:o(()=>[r(n,{cols:"12"},{default:o(()=>[s("h1",j,l(t.value.name),1)]),_:1}),r(g),r(n,{cols:"12",md:"6"},{default:o(()=>[r(S,{class:"mb-4",contain:"",height:"400",src:t.value.image},null,8,["src"])]),_:1}),r(n,{cols:"12",md:"6"},{default:o(()=>[s("p",null,"分類: "+l(t.value.category),1),s("p",null,"價格: "+l(t.value.price),1),r(g,{class:"my-5"}),s("p",q,l(t.value.description),1),r(R,{modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=_=>c.value=_),"control-variant":"split",min:1,variant:"outlined"},null,8,["modelValue"]),r(m,{class:"mt-4",color:"primary",disabled:!t.value.sell,onClick:V},{default:o(()=>a[1]||(a[1]=[f(" 加入購物車 ")])),_:1,__:[1]},8,["disabled"])]),_:1})]),_:1})]),_:1}),r(C,{class:"align-center justify-center text-center","model-value":!t.value.sell,opacity:"0.7",persistent:"",scrim:"black"},{default:o(()=>[a[3]||(a[3]=s("h1",null,"已下架",-1)),a[4]||(a[4]=s("p",null,"這個商品已經下架，無法購買。",-1)),r(m,{color:"primary",to:"/"},{default:o(()=>a[2]||(a[2]=[f(" 返回首頁 ")])),_:1,__:[2]})]),_:1,__:[3,4]},8,["model-value"])],64))}};typeof v=="function"&&v(D);export{D as default};
